{"version":3,"file":"CollapsibleButtonGroup.js","names":["React","useContext","useMemo","useState","PropTypes","MoreVert","useToggle","useWindowSize","DataTableContext","Icon","IconButton","breakpoints","ModalPopup","Stack","Button","ACTION_OVERFLOW_BUTTON_TEXT","SMALL_SCREEN_ACTION_OVERFLOW_BUTTON_TEXT","CollapsibleButtonGroup","_ref","className","actions","rest","_objectWithoutProperties","_excluded","isOverflowMenuOpen","openOverflowMenu","closeOverflowMenu","overflowMenuTarget","setOverflowMenuTarget","controlledTableSelections","isEntireTableSelected","selectedFlatRows","rows","width","selectedRows","visibleActions","dropdownActions","small","minWidth","firstTwoActions","splice","extraActions","slice","reverse","cloneAction","action","index","cloneElement","component","_objectSpread","key","as","args","createElement","_extends","length","Fragment","variant","iconAs","src","alt","id","ref","onClick","positionRef","onClose","placement","isOpen","gap","map","defaultProps","propTypes","string","arrayOf","shape","oneOfType","func","element","isRequired"],"sources":["../../src/DataTable/CollapsibleButtonGroup.jsx"],"sourcesContent":["import React, { useContext, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { MoreVert } from '../../icons';\nimport useToggle from '../hooks/useToggle';\nimport useWindowSize from '../hooks/useWindowSize';\nimport DataTableContext from './DataTableContext';\nimport Icon from '../Icon';\nimport IconButton from '../IconButton';\nimport breakpoints from '../utils/breakpoints';\nimport ModalPopup from '../Modal/ModalPopup';\nimport Stack from '../Stack';\nimport Button from '../Button';\n\nexport const ACTION_OVERFLOW_BUTTON_TEXT = 'More actions';\nexport const SMALL_SCREEN_ACTION_OVERFLOW_BUTTON_TEXT = 'Actions';\n\nfunction CollapsibleButtonGroup({\n  className,\n  actions,\n  ...rest\n}) {\n  const [isOverflowMenuOpen, openOverflowMenu, closeOverflowMenu] = useToggle(false);\n  const [overflowMenuTarget, setOverflowMenuTarget] = useState(null);\n  const {\n    controlledTableSelections: [{ isEntireTableSelected }],\n    selectedFlatRows,\n    rows,\n  } = useContext(DataTableContext);\n  const { width } = useWindowSize();\n  const selectedRows = selectedFlatRows || rows;\n\n  const [visibleActions, dropdownActions] = useMemo(() => {\n    if (width < breakpoints.small.minWidth) {\n      // On a small screen, all actions will be in the overflow menu\n      return [[], [...actions]];\n    }\n    // The first two actions will be displayed as buttons, the rest will go in an overflow menu\n    const firstTwoActions = [...actions].splice(0, 2);\n    const extraActions = [...actions].slice(2);\n\n    /*  Reversing the array because to the user it makes sense to put the primary button first,\n        but we want it on the right */\n    return [firstTwoActions.reverse(), extraActions];\n  }, [actions, width]);\n\n  if (!isEntireTableSelected && !selectedRows) {\n    return null;\n  }\n\n  const cloneAction = (action, index) => React.cloneElement(\n    action.component,\n    {\n      // eslint-disable-next-line react/no-array-index-key\n      key: `${action}${index}`,\n      as: Button, // for backwards compatibility this is needed\n      ...action.args,\n    },\n  );\n\n  return (\n    <div className={className} {...rest}>\n      {dropdownActions.length > 0 && (\n        <>\n          <IconButton\n            variant=\"secondary\"\n            iconAs={Icon}\n            src={MoreVert}\n            alt={width > breakpoints.small.minWidth\n              ? ACTION_OVERFLOW_BUTTON_TEXT : SMALL_SCREEN_ACTION_OVERFLOW_BUTTON_TEXT}\n            id=\"actions-dropdown\"\n            ref={setOverflowMenuTarget}\n            onClick={openOverflowMenu}\n          />\n          <ModalPopup\n            positionRef={overflowMenuTarget}\n            onClose={closeOverflowMenu}\n            placement=\"bottom-end\"\n            isOpen={isOverflowMenuOpen}\n          >\n            <div className=\"pgn__datatable__overflow-actions-menu\">\n              <Stack gap={2}>\n                {dropdownActions.map(cloneAction)}\n              </Stack>\n            </div>\n          </ModalPopup>\n        </>\n      )}\n      <div className=\"pgn__datatable__visible-actions\">\n        {visibleActions.map(cloneAction)}\n      </div>\n    </div>\n  );\n}\n\nCollapsibleButtonGroup.defaultProps = {\n  className: null,\n};\n\nCollapsibleButtonGroup.propTypes = {\n  /** Class names for the div wrapping the button components */\n  className: PropTypes.string,\n  /** Array of action objects, containing a component and their callback args */\n  actions: PropTypes.arrayOf(PropTypes.shape({\n    component: PropTypes.oneOfType([PropTypes.func, PropTypes.element]).isRequired,\n    args: PropTypes.shape({}),\n  })).isRequired,\n};\n\nexport default CollapsibleButtonGroup;\n"],"mappings":"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"}