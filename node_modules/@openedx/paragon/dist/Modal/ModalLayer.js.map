{"version":3,"file":"ModalLayer.js","names":["React","useEffect","classNames","PropTypes","FocusOn","Portal","ModalContextProvider","ModalBackdrop","_ref","onClick","createElement","className","onKeyDown","propTypes","func","defaultProps","undefined","ModalContentContainer","_ref2","children","node","ModalLayer","_ref3","onClose","isOpen","isBlocking","zIndex","document","body","classList","add","remove","onClickOutside","allowPinchZoom","scrollLock","enabled","onEscapeKey","concat","isRequired","bool","number"],"sources":["../../src/Modal/ModalLayer.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { FocusOn } from 'react-focus-on';\nimport Portal from './Portal';\nimport { ModalContextProvider } from './ModalContext';\n\n// istanbul ignore next\nfunction ModalBackdrop({ onClick }) {\n  return (\n    // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n    <div\n      className=\"pgn__modal-backdrop\"\n      onClick={onClick}\n      onKeyDown={onClick}\n      data-testid=\"modal-backdrop\"\n    />\n  );\n}\n\nModalBackdrop.propTypes = {\n  onClick: PropTypes.func,\n};\n\nModalBackdrop.defaultProps = {\n  onClick: undefined,\n};\n\n// istanbul ignore next\nfunction ModalContentContainer({ children }) {\n  return <div className=\"pgn__modal-content-container\">{children}</div>;\n}\n\nModalContentContainer.propTypes = {\n  children: PropTypes.node,\n};\n\nModalContentContainer.defaultProps = {\n  children: null,\n};\n\n/**\n * The ModalLayer should be used for any component that wishes to engage the user\n * in a \"mode\" where a layer on top of the application is interactive while the\n * rest of the application is made non-interactive. The assumption made by this\n * component is that if a modal object is visible then it is \"enabled\"\n */\nfunction ModalLayer({\n  children, onClose, isOpen, isBlocking, zIndex,\n}) {\n  useEffect(() => {\n    if (isOpen) {\n      document.body.classList.add('pgn__hidden-scroll-padding-right');\n    } else {\n      document.body.classList.remove('pgn__hidden-scroll-padding-right');\n    }\n    return () => {\n      document.body.classList.remove('pgn__hidden-scroll-padding-right');\n    };\n  }, [isOpen]);\n\n  if (!isOpen) {\n    return null;\n  }\n\n  const onClickOutside = !isBlocking ? onClose : null;\n\n  return (\n    <ModalContextProvider onClose={onClose} isOpen={isOpen} isBlocking={isBlocking}>\n      <Portal>\n        <FocusOn\n          allowPinchZoom\n          scrollLock\n          enabled={isOpen}\n          onEscapeKey={onClose}\n          onClickOutside={onClickOutside}\n          className={classNames(\n            'pgn__modal-layer',\n            zIndex ? `zindex-${zIndex}` : '',\n          )}\n        >\n          <ModalContentContainer>\n            <ModalBackdrop onClick={onClickOutside} />\n            {children}\n          </ModalContentContainer>\n        </FocusOn>\n      </Portal>\n    </ModalContextProvider>\n  );\n}\n\nModalLayer.propTypes = {\n  /** Specifies the contents of the modal */\n  children: PropTypes.node.isRequired,\n  /** A callback function for when the modal is dismissed */\n  onClose: PropTypes.func.isRequired,\n  /** Is the modal dialog open or closed */\n  isOpen: PropTypes.bool.isRequired,\n  /** Prevent clicking on the backdrop to close the modal */\n  isBlocking: PropTypes.bool,\n  /** Specifies the z-index of the modal */\n  zIndex: PropTypes.number,\n};\n\nModalLayer.defaultProps = {\n  isBlocking: false,\n  zIndex: undefined,\n};\n\nexport { ModalBackdrop, ModalContentContainer };\nexport default ModalLayer;\n"],"mappings":"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"}