{"version":3,"file":"FormAutosuggest.js","names":["React","useEffect","useState","useRef","PropTypes","v4","uuidv4","useIntl","KeyboardArrowUp","KeyboardArrowDown","Icon","FormGroupContextProvider","useFormGroupContext","FormControl","FormControlFeedback","IconButton","Spinner","useArrowKeyNavigation","messages","FormAutosuggest","_ref","children","arrowKeyNavigationSelector","ignoredArrowKeysNames","screenReaderText","value","isLoading","errorMessageText","onChange","onSelected","helpMessage","props","_objectWithoutProperties","_excluded","intl","formControlRef","parentRef","selectors","ignoredKeys","_useState","_useState2","_slicedToArray","isMenuClosed","setIsMenuClosed","_useState3","_useState4","isActive","setIsActive","_useState5","displayValue","errorMessage","dropDownItems","_useState6","state","setState","_useState7","_useState8","activeMenuItemId","setActiveMenuItemId","handleMenuItemFocus","menuItemId","handleItemClick","e","onClick","clickedValue","currentTarget","getAttribute","prevState","_objectSpread","getItems","strToFind","arguments","length","undefined","childrenOpt","Children","map","child","_child$props","rest","_excluded2","cloneElement","id","onFocus","filter","opt","toLowerCase","includes","handleExpand","newState","iconToggle","createElement","className","tabindex","src","iconAs","size","variant","alt","formatMessage","iconButtonOpened","iconButtonClosed","leaveControl","handleDocumentClick","current","contains","target","keyDownHandler","key","preventDefault","focus","document","addEventListener","removeEventListener","setDisplayValue","itemValue","optValue","forEach","push","normalized","find","o","handleClick","handleOnChange","findStr","filteredItems","_useFormGroupContext","getControlProps","controlProps","ref","concat","controlId","isInvalid","_extends","toString","role","autoComplete","trailingElement","type","name","animation","defaultProps","floatingLabel","placeholder","readOnly","propTypes","string","arrayOf","bool","func","node"],"sources":["../../src/Form/FormAutosuggest.jsx"],"sourcesContent":["import React, {\n  useEffect, useState, useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\nimport { useIntl } from 'react-intl';\nimport { KeyboardArrowUp, KeyboardArrowDown } from '../../icons';\nimport Icon from '../Icon';\nimport { FormGroupContextProvider, useFormGroupContext } from './FormGroupContext';\nimport FormControl from './FormControl';\nimport FormControlFeedback from './FormControlFeedback';\nimport IconButton from '../IconButton';\nimport Spinner from '../Spinner';\nimport useArrowKeyNavigation from '../hooks/useArrowKeyNavigation';\nimport messages from './messages';\n\nfunction FormAutosuggest({\n  children,\n  arrowKeyNavigationSelector,\n  ignoredArrowKeysNames,\n  screenReaderText,\n  value,\n  isLoading,\n  errorMessageText,\n  onChange,\n  onSelected,\n  helpMessage,\n  ...props\n}) {\n  const intl = useIntl();\n  const formControlRef = useRef();\n  const parentRef = useArrowKeyNavigation({\n    selectors: arrowKeyNavigationSelector,\n    ignoredKeys: ignoredArrowKeysNames,\n  });\n  const [isMenuClosed, setIsMenuClosed] = useState(true);\n  const [isActive, setIsActive] = useState(false);\n  const [state, setState] = useState({\n    displayValue: value || '',\n    errorMessage: '',\n    dropDownItems: [],\n  });\n  const [activeMenuItemId, setActiveMenuItemId] = useState(null);\n\n  const handleMenuItemFocus = (menuItemId) => {\n    setActiveMenuItemId(menuItemId);\n  };\n\n  const handleItemClick = (e, onClick) => {\n    const clickedValue = e.currentTarget.getAttribute('data-value');\n\n    if (onSelected && clickedValue !== value) {\n      onSelected(clickedValue);\n    }\n\n    setState(prevState => ({\n      ...prevState,\n      dropDownItems: [],\n      displayValue: clickedValue,\n    }));\n\n    setIsMenuClosed(true);\n\n    if (onClick) {\n      onClick(e);\n    }\n  };\n\n  function getItems(strToFind = '') {\n    let childrenOpt = React.Children.map(children, (child) => {\n      // eslint-disable-next-line no-shadow\n      const { children, onClick, ...rest } = child.props;\n      const menuItemId = uuidv4();\n\n      return React.cloneElement(child, {\n        ...rest,\n        children,\n        'data-value': children,\n        onClick: (e) => handleItemClick(e, onClick),\n        id: menuItemId,\n        onFocus: () => handleMenuItemFocus(menuItemId),\n      });\n    });\n\n    if (strToFind.length > 0) {\n      childrenOpt = childrenOpt\n        .filter((opt) => (opt.props.children.toLowerCase().includes(strToFind.toLowerCase())));\n    }\n\n    return childrenOpt;\n  }\n\n  const handleExpand = () => {\n    setIsMenuClosed(!isMenuClosed);\n\n    const newState = {\n      dropDownItems: [],\n    };\n\n    if (isMenuClosed) {\n      setIsActive(true);\n      newState.dropDownItems = getItems(state.displayValue);\n      newState.errorMessage = '';\n    }\n\n    setState(prevState => ({\n      ...prevState,\n      ...newState,\n    }));\n  };\n\n  const iconToggle = (\n    <IconButton\n      className=\"pgn__form-autosuggest__icon-button\"\n      data-testid=\"autosuggest-iconbutton\"\n      tabindex=\"-1\"\n      src={isMenuClosed ? KeyboardArrowDown : KeyboardArrowUp}\n      iconAs={Icon}\n      size=\"sm\"\n      variant=\"secondary\"\n      alt={isMenuClosed\n        ? intl.formatMessage(messages.iconButtonOpened)\n        : intl.formatMessage(messages.iconButtonClosed)}\n      onClick={(e) => handleExpand(e, isMenuClosed)}\n    />\n  );\n\n  const leaveControl = () => {\n    setIsActive(false);\n\n    setState(prevState => ({\n      ...prevState,\n      dropDownItems: [],\n      errorMessage: !state.displayValue ? errorMessageText : '',\n    }));\n\n    setIsMenuClosed(true);\n  };\n\n  const handleDocumentClick = (e) => {\n    if (parentRef.current && !parentRef.current.contains(e.target) && isActive) {\n      leaveControl();\n    }\n  };\n\n  const keyDownHandler = e => {\n    if (e.key === 'Escape' && isActive) {\n      e.preventDefault();\n\n      if (formControlRef) {\n        formControlRef.current.focus();\n      }\n\n      setState(prevState => ({\n        ...prevState,\n        dropDownItems: [],\n      }));\n\n      setIsMenuClosed(true);\n    }\n    if (e.key === 'Tab' && isActive) {\n      leaveControl();\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('keydown', keyDownHandler);\n    document.addEventListener('click', handleDocumentClick, true);\n\n    return () => {\n      document.removeEventListener('click', handleDocumentClick, true);\n      document.removeEventListener('keydown', keyDownHandler);\n    };\n  });\n\n  useEffect(() => {\n    if (value || value === '') {\n      setState(prevState => ({\n        ...prevState,\n        displayValue: value,\n      }));\n    }\n  }, [value]);\n\n  const setDisplayValue = (itemValue) => {\n    const optValue = [];\n\n    children.forEach(opt => {\n      optValue.push(opt.props.children);\n    });\n\n    const normalized = itemValue.toLowerCase();\n    const opt = optValue.find((o) => o.toLowerCase() === normalized);\n\n    setState(prevState => ({\n      ...prevState,\n      displayValue: opt || itemValue,\n    }));\n  };\n\n  const handleClick = (e) => {\n    setIsActive(true);\n    const dropDownItems = getItems(e.target.value);\n\n    if (dropDownItems.length > 1) {\n      setState(prevState => ({\n        ...prevState,\n        dropDownItems,\n        errorMessage: '',\n      }));\n\n      setIsMenuClosed(false);\n    }\n  };\n\n  const handleOnChange = (e) => {\n    const findStr = e.target.value;\n\n    if (onChange) { onChange(findStr); }\n\n    if (findStr.length) {\n      const filteredItems = getItems(findStr);\n      setState(prevState => ({\n        ...prevState,\n        dropDownItems: filteredItems,\n        errorMessage: '',\n      }));\n\n      setIsMenuClosed(false);\n    } else {\n      setState(prevState => ({\n        ...prevState,\n        dropDownItems: [],\n      }));\n\n      setIsMenuClosed(true);\n    }\n\n    setDisplayValue(e.target.value);\n  };\n\n  const { getControlProps } = useFormGroupContext();\n  const controlProps = getControlProps(props);\n\n  return (\n    <div className=\"pgn__form-autosuggest__wrapper\" ref={parentRef}>\n      <div aria-live=\"assertive\" className=\"sr-only\" data-testid=\"autosuggest-screen-reader-options-count\">\n        {`${state.dropDownItems.length} options found`}\n      </div>\n      <FormGroupContextProvider\n        controlId={controlProps.id}\n        isInvalid={!!state.errorMessage}\n      >\n        <FormControl\n          ref={formControlRef}\n          aria-expanded={(state.dropDownItems.length > 0).toString()}\n          aria-owns=\"pgn__form-autosuggest__dropdown-box\"\n          role=\"combobox\"\n          aria-autocomplete=\"list\"\n          autoComplete=\"off\"\n          value={state.displayValue}\n          aria-invalid={state.errorMessage}\n          aria-activedescendant={activeMenuItemId}\n          onChange={handleOnChange}\n          onClick={handleClick}\n          trailingElement={iconToggle}\n          data-testid=\"autosuggest-textbox-input\"\n          {...controlProps}\n        />\n\n        {helpMessage && !state.errorMessage && (\n          <FormControlFeedback type=\"default\">\n            {helpMessage}\n          </FormControlFeedback>\n        )}\n\n        {state.errorMessage && (\n          <FormControlFeedback type=\"invalid\" feedback-for={controlProps.name}>\n            {errorMessageText}\n          </FormControlFeedback>\n        )}\n      </FormGroupContextProvider>\n\n      <ul\n        id=\"pgn__form-autosuggest__dropdown-box\"\n        className=\"pgn__form-autosuggest__dropdown\"\n        role=\"listbox\"\n      >\n        {isLoading ? (\n          <div className=\"pgn__form-autosuggest__dropdown-loading\">\n            <Spinner\n              animation=\"border\"\n              variant=\"dark\"\n              screenReaderText={screenReaderText}\n              data-testid=\"autosuggest-loading-spinner\"\n            />\n          </div>\n        ) : state.dropDownItems.length > 0 && state.dropDownItems}\n      </ul>\n    </div>\n  );\n}\n\nFormAutosuggest.defaultProps = {\n  arrowKeyNavigationSelector: 'a:not(:disabled),li:not(:disabled, .btn-icon),input:not(:disabled)',\n  ignoredArrowKeysNames: ['ArrowRight', 'ArrowLeft'],\n  isLoading: false,\n  className: null,\n  floatingLabel: null,\n  onChange: null,\n  onSelected: null,\n  helpMessage: '',\n  placeholder: '',\n  value: null,\n  errorMessageText: null,\n  readOnly: false,\n  children: null,\n  name: 'form-autosuggest',\n  screenReaderText: 'loading',\n};\n\nFormAutosuggest.propTypes = {\n  /**\n   * Specifies the CSS selector string that indicates to which elements\n   * the user can navigate using the arrow keys\n  */\n  arrowKeyNavigationSelector: PropTypes.string,\n  /** Specifies ignored hook keys. */\n  ignoredArrowKeysNames: PropTypes.arrayOf(PropTypes.string),\n  /** Specifies loading state. */\n  isLoading: PropTypes.bool,\n  /** Specifies class name to append to the base element. */\n  className: PropTypes.string,\n  /** Specifies floating label to display for the input component. */\n  floatingLabel: PropTypes.string,\n  /** Specifies onChange event handler. */\n  onChange: PropTypes.func,\n  /** Specifies help information for the user. */\n  helpMessage: PropTypes.string,\n  /** Specifies the placeholder text for the input. */\n  placeholder: PropTypes.string,\n  /** Specifies values for the input. */\n  value: PropTypes.string,\n  /** Informs user has errors. */\n  errorMessageText: PropTypes.string,\n  /** Specifies the name of the base input element. */\n  name: PropTypes.string,\n  /** Selected list item is read-only. */\n  readOnly: PropTypes.bool,\n  /** Specifies the content of the `FormAutosuggest`. */\n  children: PropTypes.node,\n  /** Specifies the screen reader text */\n  screenReaderText: PropTypes.string,\n  /** Function that receives the selected value. */\n  onSelected: PropTypes.func,\n};\n\nexport default FormAutosuggest;\n"],"mappings":"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"}