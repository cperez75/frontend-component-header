{"version":3,"file":"FormControl.js","names":["React","useCallback","useEffect","PropTypes","classNames","RBFormControl","useFormGroupContext","FormControlFeedback","FormControlDecoratorGroup","callAllHandlers","useHasValue","FormControl","forwardRef","_ref","ref","as","className","controlClassName","leadingElement","trailingElement","floatingLabel","autoResize","onChange","props","_objectWithoutProperties","_excluded","_useFormGroupContext","isInvalid","isValid","getControlProps","formGroupContext","_excluded2","inputRef","useRef","resolvedRef","size","hasValue","checkInputEventValue","defaultValue","value","handleResize","current","initialHeight","offsets","offsetHeight","clientHeight","style","height","scrollHeight","controlProps","_objectSpread","onBlur","handleOnChange","e","createElement","_extends","SIZE_CHOICES","Feedback","Description","propTypes","string","elementType","func","oneOfType","number","id","oneOf","node","plaintext","bool","defaultProps","undefined"],"sources":["../../src/Form/FormControl.jsx"],"sourcesContent":["import React, { useCallback, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport RBFormControl from 'react-bootstrap/FormControl';\nimport { useFormGroupContext } from './FormGroupContext';\nimport FormControlFeedback from './FormControlFeedback';\nimport FormControlDecoratorGroup from './FormControlDecoratorGroup';\n\nimport { callAllHandlers, useHasValue } from './fieldUtils';\n\nconst FormControl = React.forwardRef(({\n  as,\n  className,\n  controlClassName,\n  leadingElement,\n  trailingElement,\n  floatingLabel,\n  autoResize,\n  onChange,\n  ...props\n}, ref) => {\n  const {\n    isInvalid,\n    isValid,\n    getControlProps,\n    ...formGroupContext\n  } = useFormGroupContext();\n  const inputRef = React.useRef();\n  const resolvedRef = ref || inputRef;\n  const size = props.size || formGroupContext.size;\n\n  const [hasValue, checkInputEventValue] = useHasValue({\n    defaultValue: props.defaultValue,\n    value: props.value,\n  });\n\n  const handleResize = useCallback(() => {\n    if (as === 'textarea' && autoResize) {\n      if (!resolvedRef.current.initialHeight && !resolvedRef.current.offsets) {\n        resolvedRef.current.initialHeight = resolvedRef.current.offsetHeight;\n        resolvedRef.current.offsets = resolvedRef.current.offsetHeight - resolvedRef.current.clientHeight;\n      }\n      resolvedRef.current.style.height = `${resolvedRef.current.initialHeight}px`;\n      resolvedRef.current.style.height = `${resolvedRef.current.scrollHeight + resolvedRef.current.offsets}px`;\n    }\n  }, [as, autoResize, resolvedRef]);\n\n  useEffect(() => {\n    handleResize();\n  }, [handleResize]);\n\n  const controlProps = getControlProps({\n    ...props,\n    // eslint-disable-next-line react/prop-types\n    onBlur: callAllHandlers(checkInputEventValue, props.onBlur),\n  });\n\n  const handleOnChange = (e) => {\n    handleResize();\n    if (onChange) {\n      onChange(e);\n    }\n  };\n\n  return (\n    <FormControlDecoratorGroup\n      size={size}\n      leadingElement={leadingElement}\n      trailingElement={trailingElement}\n      floatingLabel={floatingLabel}\n      className={className}\n    >\n      <RBFormControl\n        as={as}\n        ref={resolvedRef}\n        size={size}\n        isInvalid={isInvalid}\n        isValid={isValid}\n        className={classNames(controlClassName, {\n          'has-value': hasValue,\n        })}\n        onChange={handleOnChange}\n        {...controlProps}\n      />\n    </FormControlDecoratorGroup>\n  );\n});\n\nconst SIZE_CHOICES = ['sm', 'lg'];\n\nFormControl.Feedback = FormControlFeedback;\nFormControl.Description = FormControlFeedback;\n\nFormControl.propTypes = {\n  /** Specifies class name to append to the base element. */\n  className: PropTypes.string,\n  /** Specifies base element for the control component. */\n  as: PropTypes.elementType,\n  /** Specifies function that is triggered on input value change. */\n  onChange: PropTypes.func,\n  /** Specifies default value of the input component. */\n  defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  /** Specifies current value of the input component. */\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  /** Specifies id of the control component. */\n  id: PropTypes.string,\n  /** Specifies class name for the control component. */\n  controlClassName: PropTypes.string,\n  /** Specifies size for the control component. */\n  size: PropTypes.oneOf(SIZE_CHOICES),\n  /** Specifies leading element to display for the input component. */\n  leadingElement: PropTypes.node,\n  /** Specifies trailing element to display for the input component. */\n  trailingElement: PropTypes.node,\n  /** Specifies floating label to display for the input component. */\n  floatingLabel: PropTypes.node,\n  /** Specifies whether to render input as plain text. */\n  plaintext: PropTypes.bool,\n  /** Specifies whether to display control in valid state, this affects styling. */\n  isValid: PropTypes.bool,\n  /** Specifies whether to display control in invalid state, this affects styling. */\n  isInvalid: PropTypes.bool,\n  /** Only for `as=\"textarea\"`. Specifies whether the input can be resized according to the height of content. */\n  autoResize: PropTypes.bool,\n};\n\nFormControl.defaultProps = {\n  as: 'input',\n  className: undefined,\n  id: undefined,\n  controlClassName: undefined,\n  onChange: undefined,\n  defaultValue: undefined,\n  value: undefined,\n  size: undefined,\n  leadingElement: undefined,\n  trailingElement: undefined,\n  floatingLabel: undefined,\n  plaintext: false,\n  isValid: undefined,\n  isInvalid: undefined,\n  autoResize: false,\n};\n\nexport default FormControl;\n"],"mappings":"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"}